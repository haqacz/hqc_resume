<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <script src="https://unpkg.com/vue@3"></script>
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <!-- import JavaScript -->
    <script src="https://unpkg.com/element-plus"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.26.2/full/pyodide.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Python Online NumPy</title>
</head>

<body>
    <div id="app">
        <div id="virtual_square">
            <!-- 自制的智能体网站 -->
            <h1 class="search_toolbar_background">Python Online NumPy</h1>
            <div id="center_square">
                <h4>代码</h4>
                <el-input class="full-width-button" v-model="textarea" :rows="6" type="textarea"
                    placeholder="请输入Matplotlib代码"></el-input>
                <div>&nbsp;</div>
                <el-button class="full-width-button" type="primary" id="drawButton" @click="syncResult">绘图</el-button>
                <h4>统计结果如下：</h4>
                <el-row>
                    <el-col :span="6">
                        <div>加法</div>
                        <div id="result_0">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>&nbsp;</div>
                        <div id="result_1">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>减法</div>
                        <div id="result_2">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>&nbsp;</div>
                        <div id="result_3">0</div>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="6">
                        <div>乘法</div>
                        <div id="result_4">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>&nbsp;</div>
                        <div id="result_5">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>除法</div>
                        <div id="result_6">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>&nbsp;</div>
                        <div id="result_7">0</div>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="6">
                        <div>转置</div>
                        <div id="result_8">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>&nbsp;</div>
                        <div id="result_9">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>行列式</div>
                        <div id="result_10">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>&nbsp;</div>
                        <div>&nbsp;</div>
                    </el-col>
                </el-row>
                <el-row>
                    <el-col :span="6">
                        <div>逆</div>
                        <div id="result_11">0</div>
                    </el-col>
                    <el-col :span="6">
                        <div>&nbsp;</div>
                        <div id="result_12">0</div>
                    </el-col>
                    <el-col :span="8">
                        <div>秩</div>
                        <div id="result_13">0</div>
                    </el-col>
                </el-row>

            </div>
        </div>
    </div>
    <script>
        var originalLog = console.log;
        var logMessages = [];
        console.log = function (message) {
            originalLog.apply(console, arguments);
            logMessages.push(message);
        };
        var result;
        async function main() {
            let pyodide = await loadPyodide();
            await pyodide.loadPackage("numpy");
            $(function () {
                $('#drawButton').click(function () {
                    logMessages = [];
                    result = pyodide.runPython(globalMessage);
                    console.log("result:");
                    console.log(logMessages);
                    globalResult = logMessages;
                    $("#result_0").text(logMessages[0]);
                    $("#result_1").text(logMessages[1]);
                    $("#result_2").text(logMessages[2]);
                    $("#result_3").text(logMessages[3]);
                    $("#result_4").text(logMessages[4]);
                    $("#result_5").text(logMessages[5]);
                    $("#result_6").text(logMessages[6]);
                    $("#result_7").text(logMessages[7]);
                    $("#result_8").text(logMessages[8]);
                    $("#result_9").text(logMessages[9]);
                    $("#result_10").text(logMessages[10]);
                    $("#result_11").text(logMessages[11]);
                    $("#result_12").text(logMessages[12]);
                    $("#result_13").text(logMessages[13]);
                });
            });

        };
        main();
    </script>
    <script>
        let globalMessage;
        let globalResult;
        const App = {
            data() {
                return {
                    textarea: `
import numpy as np

# 创建矩阵 A, B 和 C
A = np.array([[1, 2], [3, 4]])
B = np.array([[5, 6], [7, 8]])
C = np.array([[1, 2], [3, 4], [5, 6]])

# 创建一个零矩阵
zero_matrix = np.zeros((2, 2))

# 创建一个单位矩阵
identity_matrix = np.eye(2)

# 创建一个对角线为特定值的矩阵
diag_matrix = np.diag([1, 2])
# 矩阵加法
addition_result = A + B

# 矩阵减法
subtraction_result = A - B

# 元素级乘法
elementwise_multiplication = A * B

# 矩阵乘法
matrix_multiplication = A @ B

print("Addition Result:", addition_result)
print("Subtraction Result:", subtraction_result)
print("Element-wise Multiplication:", elementwise_multiplication)
print("Matrix Multiplication:", matrix_multiplication)
# 转置矩阵 A
transposed_A = A.T

print("Transposed A:", transposed_A)

# 计算矩阵 A 的行列式
determinant_A = np.linalg.det(A)

print("Determinant of A:", determinant_A)

# 计算矩阵 A 的逆
inverse_A = np.linalg.inv(A)

print("Inverse of A:", inverse_A)

# 计算矩阵 C 的秩
rank_C = np.linalg.matrix_rank(C)

print("Rank of C:", rank_C)

  `,

                };
            },
            created: function () {
                globalMessage = this.textarea; // 将Vue实例中的数据赋值给全局变量
                globalResult = this.result;
            }
        };
        const app = Vue.createApp(App);
        app.use(ElementPlus);
        app.mount("#app");
    </script>
    <style>
        .search_toolbar_background {
            background-color: #ffffffa1;
        }

        #virtual_square {
            display: flex;
            flex-direction: column;
            /* 水平居中 */
            align-items: center;
            /* 垂直居中 */
            background-image: url('picture/bg1.png');
            background-position: bottom;
            background-repeat: no-repeat;
            background-size: cover;
            height: 100vh;
        }

        #center_square {
            margin-top: -20px;
            padding-left: 36px;
            padding-right: 36px;
            width: 800px;
            position: relative;
            background-color: white;
            border-radius: 10px;
        }

        .full-width-button {
            width: 100%;
            border-radius: 10px;
        }

        .el-input__inner {
            border-radius: 10px;
            /* 你可以根据需要更改这个值 */
        }

        body {
            margin: 0px;
        }
    </style>
</body>

</html>